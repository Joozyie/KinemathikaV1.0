@* WHAT IT DOES: Green teacher sidebar with sections.
   - No kebabs in the sidebar.
   - Each class shows: Name + student count badge. *@
@model Kinemathika.ViewModels.Teacher.SidebarVm

@{
    int? activeClassId = null;
    if (int.TryParse(Context.Request.Query["classId"], out var qid)) activeClassId = qid;
}

<div class="teacher-side px-2">
    <!-- Teacher -->
    <div class="text-white fw-semibold mb-1">@Model.TeacherName</div>
    <hr class="sidebar-hr" />

    <!-- Overall Overview quick jump -->
    <a asp-controller="Teacher"
       asp-action="Dashboard"
       class="btn btn-sm btn-outline-light w-100 mb-3">
        Overall Overview
    </a>


    <!-- Classes -->
    <div class="small text-white-50 mb-2">Classes</div>
    <ul class="list-unstyled mb-3">
        @if (Model.RecentClasses?.Any() == true)
        {
            foreach (var c in Model.RecentClasses)
            {
                var isActive = activeClassId.HasValue && activeClassId == c.Id ? "is-active" : "";

                <li class="d-flex align-items-center justify-content-between mb-2">
                    <a class="side-link flex-grow-1 @isActive"
                       href="@Url.Action("Dashboard", "Teacher", new { classId = c.Id })">
                        <span class="name text-truncate me-2">@c.Name</span>
                        <span class="badge side-badge flex-shrink-0">@c.StudentCount</span>
                    </a>
                </li>
            }
        }
        else
        {
            <li class="text-white-50 small">No classes yet</li>
        }
    </ul>

    <hr class="sidebar-hr" />

    <!-- Other functions -->
    <div class="small text-white-50 mb-2">Other functions</div>
    <div class="vstack gap-2">
        <a class="side-link" href="@Url.Action("Create", "Teacher")">New Class</a>
        <a class="side-link" href="@Url.Action("Classes", "Teacher")">All Classes</a>
        <a class="side-link" href='@Url.Action("Classes", "Teacher", new { archived = true })'>Archived</a>
        <a class="side-link" href="@Url.Action("Settings", "Teacher")">Settings</a>
    </div>
</div>
